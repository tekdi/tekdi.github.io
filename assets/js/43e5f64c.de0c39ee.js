"use strict";(self.webpackChunktekdi_docs=self.webpackChunktekdi_docs||[]).push([[8305],{18328:(e,d,n)=>{n.r(d),n.d(d,{assets:()=>l,contentTitle:()=>i,default:()=>x,frontMatter:()=>r,metadata:()=>s,toc:()=>a});const s=JSON.parse('{"id":"attendance-service/database-schema","title":"Database Schema","description":"Entities -Attendance Management","source":"@site/docs/attendance-service/6_database-schema.md","sourceDirName":"attendance-service","slug":"/attendance-service/database-schema","permalink":"/docs/attendance-service/database-schema","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":6,"frontMatter":{"sidebar_position":6},"sidebar":"tutorialSidebar","previous":{"title":"Architecture","permalink":"/docs/attendance-service/architecture"},"next":{"title":"Installation","permalink":"/docs/attendance-service/devops"}}');var t=n(74848),c=n(28453);const r={sidebar_position:6},i="Database Schema",l={},a=[{value:"Entities -Attendance Management",id:"entities--attendance-management",level:2},{value:"Table: Attendance",id:"table-attendance",level:3},{value:"Indexes",id:"indexes",level:2},{value:"Constraints",id:"constraints",level:2},{value:"Triggers",id:"triggers",level:2}];function h(e){const d={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",img:"img",li:"li",ol:"ol",p:"p",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,c.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(d.header,{children:(0,t.jsx)(d.h1,{id:"database-schema",children:"Database Schema"})}),"\n",(0,t.jsx)(d.h2,{id:"entities--attendance-management",children:"Entities -Attendance Management"}),"\n",(0,t.jsx)(d.h3,{id:"table-attendance",children:"Table: Attendance"}),"\n",(0,t.jsxs)(d.table,{children:[(0,t.jsx)(d.thead,{children:(0,t.jsxs)(d.tr,{children:[(0,t.jsx)(d.th,{children:(0,t.jsx)(d.strong,{children:"Column Name"})}),(0,t.jsx)(d.th,{children:(0,t.jsx)(d.strong,{children:"Data Type"})}),(0,t.jsx)(d.th,{children:(0,t.jsx)(d.strong,{children:"Details"})})]})}),(0,t.jsxs)(d.tbody,{children:[(0,t.jsxs)(d.tr,{children:[(0,t.jsx)(d.td,{children:(0,t.jsx)(d.code,{children:"attendance"})}),(0,t.jsx)(d.td,{children:(0,t.jsx)(d.code,{children:"varchar"})}),(0,t.jsxs)(d.td,{children:[(0,t.jsx)(d.strong,{children:"NOT NULL"}),", must be one of (",(0,t.jsx)(d.code,{children:"present"}),", ",(0,t.jsx)(d.code,{children:"absent"}),", ",(0,t.jsx)(d.code,{children:"on-leave"}),")"]})]}),(0,t.jsxs)(d.tr,{children:[(0,t.jsx)(d.td,{children:(0,t.jsx)(d.code,{children:"remark"})}),(0,t.jsx)(d.td,{children:(0,t.jsx)(d.code,{children:"varchar(255)"})}),(0,t.jsx)(d.td,{children:"Optional"})]}),(0,t.jsxs)(d.tr,{children:[(0,t.jsx)(d.td,{children:(0,t.jsx)(d.code,{children:"image"})}),(0,t.jsx)(d.td,{children:(0,t.jsx)(d.code,{children:"varchar(500)"})}),(0,t.jsx)(d.td,{children:"Optional"})]}),(0,t.jsxs)(d.tr,{children:[(0,t.jsx)(d.td,{children:(0,t.jsx)(d.code,{children:"metaData"})}),(0,t.jsx)(d.td,{children:(0,t.jsx)(d.code,{children:"varchar"})}),(0,t.jsx)(d.td,{children:"Optional"})]}),(0,t.jsxs)(d.tr,{children:[(0,t.jsx)(d.td,{children:(0,t.jsx)(d.code,{children:"syncTime"})}),(0,t.jsx)(d.td,{children:(0,t.jsx)(d.code,{children:"varchar"})}),(0,t.jsx)(d.td,{children:"Optional"})]}),(0,t.jsxs)(d.tr,{children:[(0,t.jsx)(d.td,{children:(0,t.jsx)(d.code,{children:"session"})}),(0,t.jsx)(d.td,{children:(0,t.jsx)(d.code,{children:"varchar"})}),(0,t.jsx)(d.td,{children:"Optional"})]}),(0,t.jsxs)(d.tr,{children:[(0,t.jsx)(d.td,{children:(0,t.jsx)(d.code,{children:"contextId"})}),(0,t.jsx)(d.td,{children:(0,t.jsx)(d.code,{children:"uuid"})}),(0,t.jsx)(d.td,{children:(0,t.jsx)(d.strong,{children:"NOT NULL"})})]}),(0,t.jsxs)(d.tr,{children:[(0,t.jsx)(d.td,{children:(0,t.jsx)(d.code,{children:"context"})}),(0,t.jsx)(d.td,{children:(0,t.jsx)(d.code,{children:"varchar(255)"})}),(0,t.jsx)(d.td,{children:(0,t.jsx)(d.strong,{children:"NOT NULL"})})]}),(0,t.jsxs)(d.tr,{children:[(0,t.jsx)(d.td,{children:(0,t.jsx)(d.code,{children:"createdAt"})}),(0,t.jsx)(d.td,{children:(0,t.jsx)(d.code,{children:"timestamptz"})}),(0,t.jsx)(d.td,{children:"Defaults to current timestamp"})]}),(0,t.jsxs)(d.tr,{children:[(0,t.jsx)(d.td,{children:(0,t.jsx)(d.code,{children:"updatedAt"})}),(0,t.jsx)(d.td,{children:(0,t.jsx)(d.code,{children:"timestamptz"})}),(0,t.jsx)(d.td,{children:"Defaults to current timestamp"})]}),(0,t.jsxs)(d.tr,{children:[(0,t.jsx)(d.td,{children:(0,t.jsx)(d.code,{children:"attendanceId"})}),(0,t.jsx)(d.td,{children:(0,t.jsx)(d.code,{children:"uuid"})}),(0,t.jsxs)(d.td,{children:[(0,t.jsx)(d.strong,{children:"NOT NULL"}),", Primary Key, defaults to ",(0,t.jsx)(d.code,{children:"gen_random_uuid()"})]})]}),(0,t.jsxs)(d.tr,{children:[(0,t.jsx)(d.td,{children:(0,t.jsx)(d.code,{children:"tenantId"})}),(0,t.jsx)(d.td,{children:(0,t.jsx)(d.code,{children:"uuid"})}),(0,t.jsx)(d.td,{children:(0,t.jsx)(d.strong,{children:"NOT NULL"})})]}),(0,t.jsxs)(d.tr,{children:[(0,t.jsx)(d.td,{children:(0,t.jsx)(d.code,{children:"userId"})}),(0,t.jsx)(d.td,{children:(0,t.jsx)(d.code,{children:"uuid"})}),(0,t.jsx)(d.td,{children:(0,t.jsx)(d.strong,{children:"NOT NULL"})})]}),(0,t.jsxs)(d.tr,{children:[(0,t.jsx)(d.td,{children:(0,t.jsx)(d.code,{children:"attendanceDate"})}),(0,t.jsx)(d.td,{children:(0,t.jsx)(d.code,{children:"date"})}),(0,t.jsxs)(d.td,{children:[(0,t.jsx)(d.strong,{children:"NOT NULL"}),", defaults to current date"]})]}),(0,t.jsxs)(d.tr,{children:[(0,t.jsx)(d.td,{children:(0,t.jsx)(d.code,{children:"latitude"})}),(0,t.jsx)(d.td,{children:(0,t.jsx)(d.code,{children:"float8"})}),(0,t.jsx)(d.td,{children:"Optional"})]}),(0,t.jsxs)(d.tr,{children:[(0,t.jsx)(d.td,{children:(0,t.jsx)(d.code,{children:"longitude"})}),(0,t.jsx)(d.td,{children:(0,t.jsx)(d.code,{children:"float8"})}),(0,t.jsx)(d.td,{children:"Optional"})]}),(0,t.jsxs)(d.tr,{children:[(0,t.jsx)(d.td,{children:(0,t.jsx)(d.code,{children:"createdBy"})}),(0,t.jsx)(d.td,{children:(0,t.jsx)(d.code,{children:"uuid"})}),(0,t.jsx)(d.td,{children:"Optional"})]}),(0,t.jsxs)(d.tr,{children:[(0,t.jsx)(d.td,{children:(0,t.jsx)(d.code,{children:"updatedBy"})}),(0,t.jsx)(d.td,{children:(0,t.jsx)(d.code,{children:"uuid"})}),(0,t.jsx)(d.td,{children:"Optional"})]}),(0,t.jsxs)(d.tr,{children:[(0,t.jsx)(d.td,{children:(0,t.jsx)(d.code,{children:"scope"})}),(0,t.jsx)(d.td,{children:(0,t.jsx)(d.code,{children:"public.attendance_scope"})}),(0,t.jsx)(d.td,{children:"Optional"})]})]})]}),"\n",(0,t.jsx)(d.h2,{id:"indexes",children:"Indexes"}),"\n",(0,t.jsxs)(d.ul,{children:["\n",(0,t.jsxs)(d.li,{children:[(0,t.jsx)(d.strong,{children:(0,t.jsx)(d.code,{children:"Attendance_tenant"})}),": Hash index on ",(0,t.jsx)(d.code,{children:"tenantId"}),"."]}),"\n",(0,t.jsxs)(d.li,{children:[(0,t.jsx)(d.strong,{children:(0,t.jsx)(d.code,{children:"Attendance_userId"})}),": Hash index on ",(0,t.jsx)(d.code,{children:"userId"}),"."]}),"\n"]}),"\n",(0,t.jsx)(d.h2,{id:"constraints",children:"Constraints"}),"\n",(0,t.jsxs)(d.ol,{children:["\n",(0,t.jsxs)(d.li,{children:[(0,t.jsx)(d.strong,{children:"Primary Key"}),": ",(0,t.jsx)(d.code,{children:"PK_Attendance_attendanceId"})," on ",(0,t.jsx)(d.code,{children:"attendanceId"}),"."]}),"\n",(0,t.jsxs)(d.li,{children:[(0,t.jsx)(d.strong,{children:"Check Constraint"}),": ",(0,t.jsx)(d.code,{children:"attendance"})," must be one of ",(0,t.jsx)(d.code,{children:"present"}),", ",(0,t.jsx)(d.code,{children:"absent"}),", or ",(0,t.jsx)(d.code,{children:"on-leave"}),"."]}),"\n"]}),"\n",(0,t.jsx)(d.h2,{id:"triggers",children:"Triggers"}),"\n",(0,t.jsxs)(d.ul,{children:["\n",(0,t.jsxs)(d.li,{children:[(0,t.jsx)(d.strong,{children:(0,t.jsx)(d.code,{children:"set_public_Attendance_updatedAt"})}),": Trigger to update ",(0,t.jsx)(d.code,{children:"updatedAt"})," timestamp before any update operation."]}),"\n"]}),"\n",(0,t.jsx)(d.p,{children:(0,t.jsx)(d.img,{alt:"NotificationLogs",src:n(55689).A+"",width:"162",height:"434"})})]})}function x(e={}){const{wrapper:d}={...(0,c.R)(),...e.components};return d?(0,t.jsx)(d,{...e,children:(0,t.jsx)(h,{...e})}):h(e)}},55689:(e,d,n)=>{n.d(d,{A:()=>s});const s=n.p+"assets/images/attendance-8290772e5b4b0ad64a1986c2064a8ade.png"}}]);